(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),l=a.n(s),o=a(9),i=(a(63),a(7)),c=a(10),m=a.n(c),d=a(16);a(27);const u=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{id:"login-row",className:"row justify-content-center align-items-center"},r.a.createElement("div",{id:"login-column",className:"col-md-6 py-3"},r.a.createElement("div",{id:"login-box",className:"col-md-12"},r.a.createElement("form",{id:"login-form",className:"form",method:"post",onSubmit:e.onSubmit},e.children))))));var p=class extends n.Component{constructor(...e){var t;super(...e),t=this,this.state={email:"",password:"",redirect:!!localStorage.getItem("userTokenTime")},this.onSubmitHandler=(()=>{""!==this.state.email&&""!==this.state.password&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.state.email)?function(){var e=Object(d.a)(m.a.mark(function e(){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/signin",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t.state.email,password:t.state.password})});case 3:if((a=e.sent).ok){e.next=6;break}throw Error(a.statusText);case 6:return e.next=8,a.json();case 8:n=e.sent,localStorage.setItem("userTokenTime",JSON.stringify({token:n.token,time:(new Date).getTime()})),t.setState({redirect:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error while user signin",e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}()():alert("Please enter valid details")}),this.emailInputChangeHandler=(e=>{this.setState({email:e.target.value})}),this.passwordInputChangeHandler=(e=>{this.setState({password:e.target.value})})}render(){return this.state.redirect?r.a.createElement(i.a,{to:"/"}):r.a.createElement(u,{onSubmit:this.onSubmitHandler},r.a.createElement("h3",{className:"text-center text-info"},"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"text-info"},"Email:"),r.a.createElement("br",null),r.a.createElement("input",{id:"email",className:"form-control",type:"email",name:"email",placeholder:"example@domain.com",onChange:this.emailInputChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"text-info"},"Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"password",className:"form-control",type:"password",name:"password",placeholder:"********",onChange:this.passwordInputChangeHandler,required:!0})),r.a.createElement("div",{className:"d-flex justify-content-between align-items-end"},r.a.createElement("button",{onClick:this.onSubmitHandler,className:"btn btn-info btn-md",type:"button"},"Submit"),r.a.createElement(o.b,{to:"/signUp",className:"text-info"},"Sign Up here")))}};var h=class extends r.a.Component{constructor(...e){var t;super(...e),t=this,this.state={firstName:"",lastName:"",email:"",password:"",redirect:!!localStorage.getItem("userTokenTime")},this.onSubmitHandler=(e=>{e.preventDefault(),""!==this.state.firstName&&""!==this.state.lastName&&""!==this.state.email&&""!==this.state.password&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.state.email)?function(){var e=Object(d.a)(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({firstName:t.state.firstName,lastName:t.state.lastName,email:t.state.email,password:t.state.password})});case 3:if((a=e.sent).ok){e.next=6;break}throw Error(a.statusText);case 6:t.setState({redirect:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error while user signup",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}()():alert("Please enter valid details")}),this.firstNameInputChangeHandler=(e=>{this.setState({firstName:e.target.value})}),this.lastNameInputChangeHandler=(e=>{this.setState({lastName:e.target.value})}),this.emailInputChangeHandler=(e=>{this.setState({email:e.target.value})}),this.passwordInputChangeHandler=(e=>{this.setState({password:e.target.value})})}render(){return this.state.redirect?r.a.createElement(i.a,{to:"/"}):r.a.createElement(u,{onSubmit:this.onSubmitHandler},r.a.createElement("h3",{className:"text-center text-info"},"Register"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"first-name",className:"text-info"},"First Name:"),r.a.createElement("br",null),r.a.createElement("input",{id:"first-name",className:"form-control",type:"text",name:"firstName",placeholder:"First Name",onChange:this.firstNameInputChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"last-name",className:"text-info"},"Last Name:"),r.a.createElement("br",null),r.a.createElement("input",{id:"last-name",className:"form-control",type:"text",name:"lastName",placeholder:"Last Name",onChange:this.lastNameInputChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"text-info"},"Email:"),r.a.createElement("br",null),r.a.createElement("input",{id:"email",className:"form-control",type:"email",name:"email",placeholder:"example@domain.com",onChange:this.emailInputChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"text-info"},"Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"password",className:"form-control",type:"password",name:"password",placeholder:"********",onChange:this.passwordInputChangeHandler,required:!0})),r.a.createElement("div",{className:"d-flex justify-content-between align-items-end"},r.a.createElement("input",{type:"submit",name:"submit",className:"btn btn-info btn-md",value:"Submit"}),r.a.createElement(o.b,{to:"/signUp",className:"text-info"},"Login here")))}},g=(a(69),a(20)),v=a(115),f=a(49),E=a.n(f);var b=class extends r.a.Component{constructor(...e){super(...e),this.state={loggedIn:localStorage.getItem("userTokenTime")}}render(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-info"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},"VideoServer"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},this.state.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{className:"nav-item nav-link",to:"/",exact:!0},"Home"),r.a.createElement(o.c,{className:"nav-item nav-link",to:"/upload"},"Upload"),r.a.createElement(o.c,{className:"nav-item nav-link",to:"/signOut"},"Sign Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{className:"nav-item nav-link",to:"/signIn"},"Sign In"),r.a.createElement(o.c,{className:"nav-item nav-link",to:"/signUp"},"Sign Up"))))))}};a(87);var N=class extends n.Component{constructor(...e){var t;super(...e),t=this,this.state={selectedVideos:null,loaded:0},this.validateFile=(e=>{const t=e.target.files;if(t.length>1)return g.b.error("Maximum 1 file is allowed"),e.target.value=null,!1;{let a="";for(let e=0;e<t.length;e++)t[e].size>52428800&&(a+=t[e].name+", ");""!==a&&(e.target.value=null,g.b.error(a+" is/are too large. Please select file size < 50Mb"))}return!0}),this.fileChangeHandler=(e=>{this.validateFile(e)&&this.setState({selectedVideos:e.target.files,loaded:0})}),this.fileUploadHandler=(e=>{const a=new FormData;if(null!==this.state.selectedVideos){for(let e=0;e<this.state.selectedVideos.length;e++)a.append("file",this.state.selectedVideos[e]);!function(){var e=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("/api/upload",a,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userTokenTime")).token},onUploadProgress:function(e){this.setState({loaded:parseInt(Math.round(100*e.loaded/e.total))})}.bind(t)});case 3:"OK"===e.sent.statusText&&g.b.success("Upload Successful"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error while file upload",e.t0),g.b.error("Upload Fail with status: ".concat(e.t0.statusText));case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}()()}})}render(){return localStorage.getItem("userTokenTime")?r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"form-group"},r.a.createElement(g.a,null)),r.a.createElement("h4",null,"Upload Video"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(u,{form:!0,method:"post",name:"videoUpload",action:"/api/upload",id:"#",encType:"multipart/form-data"},r.a.createElement("div",{className:"form-group files"},r.a.createElement("label",null,"Upload Your Videos Here"),r.a.createElement("input",{className:"form-control",type:"file",name:"file",className:"form-control",multiple:"multiple",accept:"video/*",onChange:this.fileChangeHandler}),r.a.createElement(v.a,{max:"100",color:"success",value:this.state.loaded,className:"mt-4 mb-1"},isNaN(Math.round(this.state.loaded,2))?0:Math.round(this.state.loaded,2),"%"),r.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:this.fileUploadHandler},"Upload Video"))))):r.a.createElement(i.a,{to:"/signIn"})}};a(88);var x=class extends r.a.Component{constructor(e){super(e);let t=!1;if(localStorage.getItem("userTokenTime")){const e=JSON.parse(localStorage.getItem("userTokenTime"));(new Date).getTime()-e.time>36e5&&(localStorage.removeItem("userTokenTime"),t=!0)}else t=!0;this.state={redirect:t,videoList:[]}}componentDidMount(){var e=this;localStorage.getItem("userTokenTime")&&function(){var t=Object(d.a)(m.a.mark(function t(){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://127.0.0.1:3333/api/videoList",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userTokenTime")).token}});case 3:if((a=t.sent).ok){t.next=6;break}throw Error(a.statusText);case 6:return t.next=8,a.json();case 8:n=t.sent,e.setState({videoList:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("error while getting video details",t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}));return function(){return t.apply(this,arguments)}}()()}render(){if(this.state.redirect)return r.a.createElement(i.a,{to:"/SignOut"});const e=this.state.videoList.map(e=>r.a.createElement("div",{className:"col-md-4",key:e._id},r.a.createElement("div",{className:"video-thumbnail img-thumbnail"},r.a.createElement(o.b,{to:"/video/"+e.upload_title},r.a.createElement("img",{src:e.thumbnail_path,alt:"video thubmnail"})),r.a.createElement("div",{className:"video-title"},r.a.createElement(o.b,{to:"/video/"+e.upload_title},e.upload_title.replace(/_/g," "))),r.a.createElement("div",null,"Uploaded by:"," "+e.uploader_name))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"container mt-5"},r.a.createElement("h4",null,"Videos"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("div",{className:"streams row"},e)))}},w=a(57);a(109);var S=class extends r.a.Component{constructor(...e){super(...e),this.state={loaded:!1,videoJsOptions:null}}componentDidMount(){var e=this;!function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/videoList",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("userTokenTime")).token}});case 3:if((a=t.sent).ok){t.next=6;break}throw Error(a.statusText);case 6:return t.next=8,a.json();case 8:t.sent.map(t=>{t.upload_title===e.props.match.params.videoTitle&&e.setState({loaded:!0,videoJsOptions:{autoplay:!1,controls:!0,sources:[{src:t.video_path}],fluid:!0}},()=>{e.player=Object(w.a)(e.videoNode,e.state.videoJsOptions,function(){})})}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("error while getting video details",t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}));return function(){return t.apply(this,arguments)}}()()}componentWillUnmount(){this.player&&this.player.dispose()}render(){return localStorage.getItem("userTokenTime")?r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"row",style:{width:"100vw"}},r.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-10 col-lg-8 mx-auto mt-5"},this.state.loaded?r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{ref:e=>this.videoNode=e,className:"video-js vjs-big-play-centered"})):" Loading ... "))):r.a.createElement(i.a,{to:"/signIn"})}};var k=e=>(localStorage.getItem("userTokenTime")&&localStorage.removeItem("userTokenTime"),r.a.createElement(i.a,{to:"/signIn"}));function T(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:x}),r.a.createElement(i.b,{exact:!0,path:"/signin",component:p}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:h}),r.a.createElement(i.b,{exact:!0,path:"/upload",component:N}),r.a.createElement(i.b,{exact:!0,path:"/video/:videoTitle",component:S}),r.a.createElement(i.b,{exact:!0,path:"/signOut",component:k})))}a(110);const y=document.getElementById("root");l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(T,null))),y)},27:function(e,t,a){},58:function(e,t,a){e.exports=a(111)},63:function(e,t,a){},69:function(e,t,a){},88:function(e,t,a){},89:function(e,t){}},[[58,1,2]]]);
//# sourceMappingURL=main.9b519fe5.chunk.js.map